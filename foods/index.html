<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Healing Foods ‚Äî Healing with MM</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;1,400&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/shared.css">
  <style>
    body { background: var(--bg); padding-bottom: var(--tab-bar-h); }

    .page-header {
      padding: 52px 18px 20px;
      background: linear-gradient(to bottom, #fff, var(--bg));
    }
    .page-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      font-weight: 600;
      color: var(--text-primary);
      letter-spacing: -.02em;
    }
    .page-header p { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }

    .search-wrap { padding: 0 18px 12px; }
    .search-input {
      width: 100%;
      padding: 11px 16px 11px 40px;
      border: 1.5px solid var(--divider);
      border-radius: 12px;
      font-size: 15px;
      background: #fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%239a96a8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' viewBox='0 0 24 24'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E") no-repeat 12px 50%;
      color: var(--text-primary);
      outline: none;
      transition: border-color .2s;
      -webkit-appearance: none;
    }
    .search-input:focus { border-color: var(--accent); }

    .cats {
      display: flex;
      gap: 8px;
      padding: 4px 18px 14px;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .cats::-webkit-scrollbar { display: none; }
    .cat-btn {
      flex-shrink: 0;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      border: 1.5px solid var(--divider);
      background: #fff;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all .18s;
      white-space: nowrap;
    }
    .cat-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }

    .count-bar { padding: 0 18px 10px; font-size: 13px; color: var(--text-muted); }

    /* Foods grid ‚Äî extends mm-food-grid with local override */
    .foods-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 0 18px 24px;
    }

    /* Food card ‚Äî extends mm-card mm-card--food */
    .food-card {
      background: #fff;
      border-radius: 16px;
      overflow: hidden;
      text-decoration: none;
      display: flex;
      flex-direction: column;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.04);
      transition: transform .2s ease, box-shadow .2s ease;
      color: inherit;
    }
    .food-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,.08); }
    .food-card:active { transform: scale(.97); }

    .food-card__hero {
      height: 110px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    .food-card__hero-img { position: absolute; inset: 0; background-size: cover; background-position: center; }
    .food-card__hero-emoji { font-size: 42px; position: relative; z-index: 1; filter: drop-shadow(0 2px 6px rgba(0,0,0,.15)); }

    .food-card__body { padding: 10px 12px 12px; flex: 1; }
    .food-card__cat { display: inline-block; font-size: 10px; font-weight: 700; letter-spacing: .08em; text-transform: uppercase; margin-bottom: 6px; color: var(--accent); background: var(--accent-bg); padding: 3px 9px; border-radius: 8px; }
    .food-card__name { font-size: 15px; font-weight: 700; color: var(--text-primary); line-height: 1.2; margin-bottom: 2px; }
    .food-card__subtitle { font-size: 11px; color: var(--text-muted); font-style: italic; line-height: 1.3; }

    .empty { grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--text-muted); }
    .empty-icon { font-size: 40px; margin-bottom: 10px; }

    @media (min-width: 768px) {
      .foods-grid { grid-template-columns: repeat(3, 1fr); gap: 16px; padding: 0 24px 32px; }
    }
    @media (min-width: 1024px) {
      .foods-grid { grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>

<div class="page-header">
  <h1>Healing Foods</h1>
  <p>50 foods ranked by healing power</p>
</div>

<div class="search-wrap">
  <input class="search-input" type="search" placeholder="Search foods‚Ä¶" id="searchInput" oninput="onSearch()">
</div>

<div class="cats">
  <button class="cat-btn active" onclick="setCat('All',this)">All</button>
  <button class="cat-btn" onclick="setCat('Fruits',this)">üçé Fruits</button>
  <button class="cat-btn" onclick="setCat('Vegetables',this)">ü•ï Vegetables</button>
  <button class="cat-btn" onclick="setCat('Herbs & Spices',this)">üåø Herbs</button>
  <button class="cat-btn" onclick="setCat('Wild Foods',this)">ü´ê Wild Foods</button>
</div>

<div class="count-bar mm-section-header" id="countBar" style="letter-spacing:.05em;text-transform:none;font-size:12px"></div>
<div class="foods-grid mm-food-grid" id="foodsGrid">
  <div class="empty"><div class="empty-icon">üåø</div><p>Loading‚Ä¶</p></div>
</div>

<script src="../js/tabbar.js"></script>
<script>
  var ALL_FOODS = [];
  var currentCat = 'All';
  var EMOJI = { 'Fruits':'üçì','Vegetables':'ü•¶','Herbs & Spices':'üåø','Wild Foods':'ü´ê' };

  function setCat(cat, btn) {
    currentCat = cat;
    document.querySelectorAll('.cat-btn').forEach(function(b){ b.classList.remove('active'); });
    btn.classList.add('active');
    renderFoods();
  }
  function onSearch() { renderFoods(); }

  function renderFoods() {
    var q = (document.getElementById('searchInput').value||'').toLowerCase().trim();
    var filtered = ALL_FOODS.filter(function(f) {
      var matchCat = currentCat==='All' || f.category===currentCat;
      var matchQ = !q || f.name.toLowerCase().includes(q) || f.subtitle.toLowerCase().includes(q) ||
        (f.symptoms||[]).some(function(s){ return s.toLowerCase().includes(q); }) ||
        (f.conditions||[]).some(function(c){ return c.toLowerCase().includes(q); });
      return matchCat && matchQ;
    });
    document.getElementById('countBar').textContent = filtered.length + ' food' + (filtered.length!==1?'s':'');
    var grid = document.getElementById('foodsGrid');
    if (!filtered.length) {
      grid.innerHTML = '<div class="empty"><div class="empty-icon">üåø</div><p>No foods found</p></div>';
      return;
    }
    grid.innerHTML = filtered.map(function(f) {
      var heroBg = 'background:linear-gradient(135deg,' + f.colors.secondary + ',' + f.colors.deep + ')';
      var heroContent = f.heroImage
        ? '<div class="food-card__hero-img" style="background-image:url(\''+f.heroImage+'\')"></div>'
        : '<div class="food-card__hero-emoji">'+(EMOJI[f.category]||'üåø')+'</div>';
      return '<a class="food-card mm-card mm-card--food" href="./'+f.slug+'.html">'
        + '<div class="food-card__hero" style="'+heroBg+'">'+heroContent+'</div>'
        + '<div class="food-card__body">'
        + '<div class="food-card__cat">'+f.category+'</div>'
        + '<div class="food-card__name">'+f.name+'</div>'
        + '<div class="food-card__subtitle">'+f.subtitle+'</div>'
        + '</div></a>';
    }).join('');
  }

  fetch('../data/foods.json')
    .then(function(r){ return r.json(); })
    .then(function(foods){ ALL_FOODS = foods; renderFoods(); })
    .catch(function(){ document.getElementById('foodsGrid').innerHTML='<div class="empty"><div class="empty-icon">‚ö†Ô∏è</div><p>Error loading foods</p></div>'; });
</script>
</body>
</html>
